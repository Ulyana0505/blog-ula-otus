(()=>{"use strict";const t="carousel",e=`${t}-item`,n=`${t}-text`,i=`${t}-inner`,s=`${t}-slide`,r=`${t}-control-prev`,l=`${t}-control-next`,a="active",o=`${t}-next__animation`,d=`${t}-next__element`,c=`${t}-prev__animation`,m=`${t}-prev__element`,u=`${t}-indicators`,h={none:0,next:1,prev:-1},g=-1;function x(t={}){return t.width=t.width||500,t.height=t.height||300,t.withControl=!!t.withControl,t.withIndicators=!!t.withIndicators,t.timeView=t.timeView||3e3,t.timeSliding=t.timeSliding||1e3,t}function y(n,s=[],o={}){if(!s.length)return;o=x(o),function(n,s,o){const d=s.map((t=>`<div class="${e}">${$(t,o)}</div>`)),c=[`<div class="${i}">${d.join("")}</div>`];o.withControl&&c.push(`<button class="${r}"></button>`,`<button class="${l}"></button>`),o.withIndicators&&c.push(`<div class="${u}"/>`),n.setAttribute("style",`--sliding-time: ${o.timeSliding}ms;`),n.classList.add(t),n.style.width=o.width+"px",n.innerHTML=c.join(""),n.getElementsByClassName(e)[0].classList.add(a)}(n,s,o);const d=function(t,e,n){const i={parentElem:t,timerNext:0,isSliding:!1,nextByDirection:h.none,nextByControl:g,all:e,currentIndex:0,initial:n};return n.withControl&&(t.getElementsByClassName(r)[0].addEventListener("click",(()=>C(i,h.prev))),t.getElementsByClassName(l)[0].addEventListener("click",(()=>C(i,h.next)))),n.withIndicators&&(v(i),i.parentElem.getElementsByClassName(u).item(0).addEventListener("click",(t=>function(t,e){const n=Number(e.dataset?.index);isNaN(n)||(t.nextByControl=n,f(t))}(i,t.target)))),w(i),i}(n,s.length,o);return{appendSlide(t,s){const r=n.getElementsByClassName(i);if(1===r.length){const i=r[0],l=document.createElement("div");l.classList.add(e),l.innerHTML=$({src:t,text:s},o),i.appendChild(l),d.all=n.getElementsByClassName(e).length,v(d)}},all:()=>d.all,removeSlide(t){const i=n.getElementsByClassName(e);i.item(t)?.remove(),d.all=n.getElementsByClassName(e).length,v(d)},updateSlide(t,i,s){const r=n.getElementsByClassName(e);r.item(t)&&(r.item(t).innerHTML=$({src:i,text:s},o))}}}function $(t,e){return`<div class="${s}"><img src="${t.src}" width="${e.width}" height="${e.height}" alt="" />${t.text?`<div class="${n}">${t.text}</div>`:""}</div>`}function v(t){const e=t.parentElem.getElementsByClassName(u);1===e.length&&(e.item(0).innerHTML=Array.from({length:t.all}).map(((t,e)=>`<button data-index="${e}"></button>`)).join(""))}function w(t){clearTimeout(t.timerNext),t.timerNext=setTimeout(N,t.initial.timeView,t)}function N(t){C(t,h.next)}function C(t,e){t.nextByDirection=e,f(t)}function f(t){if(t.isSliding)return;let n=t.nextByControl>g?t.nextByControl:t.currentIndex+t.nextByDirection;const i=n>t.currentIndex;if(n=i?n>=t.all?0:n:n<0?t.all-1:n,t.nextByControl=g,t.nextByDirection=h.none,n===t.currentIndex)return void w(t);t.isSliding=!0,clearTimeout(t.timerNext);const s=[...t.parentElem.querySelectorAll(`.${e}`)],r=s[t.currentIndex],l=s[n].classList,u=i?d:m,x=i?o:c,y=r.classList;l.add(a,u,x),y.add(x),r.addEventListener("animationend",(function e(){t.isSliding=!1,t.currentIndex=n,r.removeEventListener("animationend",e),y.remove(a,x),l.remove(u,x),t.nextByControl!==g||t.nextByDirection!==h.none?t.timerNext=setTimeout(f,300,t):w(t)}))}!function(){const i=[...document.getElementsByClassName(t)];for(const t of i){const i=[];for(const s of[...t.querySelectorAll("."+e)]){const t=s.querySelector("img"),e=s.querySelector("."+n);t&&i.push({src:t.getAttribute("src"),text:e?.innerHTML.trim()??""})}const s=x();s.withControl="controls"in t.dataset,s.withIndicators="indicators"in t.dataset,s.timeView=Number(t.dataset.timeView)>0?Number(t.dataset.timeView):s.timeView,s.width=Number(t.dataset.width)>0?Number(t.dataset.width):s.width,s.height=Number(t.dataset.height)>0?Number(t.dataset.height):s.height,s.timeSliding=Number(t.dataset.timeSliding)>0?Number(t.dataset.timeSliding):s.timeSliding,y(t,i,s)}}()})();